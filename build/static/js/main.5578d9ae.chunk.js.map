{"version":3,"sources":["components/Auth/useFormValidation.js","components/Auth/validateCreateLink.js","firebase/config.js","firebase/firebase.js","firebase/context.js","firebase/index.js","components/Link/CreateLink.js","components/Auth/validateLogin.js","components/Auth/Login.js","components/Auth/ForgotPassword.js","components/Link/LinkItem.js","utils/index.js","components/Link/SearchLinks.js","components/Link/LinkList.js","components/Link/LinkDetail.js","components/Header.js","components/Auth/useAuth.js","components/App.js","serviceWorker.js","index.js"],"names":["useFormValidation","initialState","validate","authenticate","_React$useState","React","useState","_React$useState2","Object","slicedToArray","values","setValues","_React$useState3","_React$useState4","errors","setErrors","_React$useState5","_React$useState6","isSubmitting","setSubmitting","useEffect","keys","length","console","log","handleChange","event","persist","prevValues","objectSpread","defineProperty","target","name","value","handleSubmit","preventDefault","validationErrors","handleBlur","validateCreateLink","description","url","test","firebaseConfig","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","firebase","Firebase","classCallCheck","this","app","initializeApp","auth","db","firestore","email","password","createUserWithEmailAndPassword","newUser","user","updateProfile","displayName","signInWithEmailAndPassword","signOut","sendPasswordResetEmail","FirebaseContext","createContext","CreateLink","props","_React$useContext","useContext","_useFormValidation","newLink","postedBy","id","uid","voteCount","votes","comments","created","Date","now","collection","add","history","push","react_default","a","createElement","onSubmit","className","onChange","placeholder","type","validateLogin","INIT_STATE","Login","_authenticateUser","apply","arguments","_useState","_useState2","login","setLogin","_useState3","_useState4","fbError","setFbError","asyncToGenerator","regenerator_default","mark","_callee","wrap","_context","prev","next","register","t0","message","stop","onBlur","disabled","style","background","onClick","prevLogin","react_router_dom","to","ForgotPassword","resetPasswordEmail","setResetPasswordEmail","isPasswordReset","setIsPasswordReset","passwordResetError","setPasswordResetError","_handleResetPassword","resetPassword","error","e","handleResetPassword","withRouter","_ref","link","index","showCount","postedByAuthUser","voteRef","doc","get","then","exists","prevVotes","data","vote","votedBy","updatedVotes","concat","toConsumableArray","update","href","replace","distanceInWordsToNow","Fragment","delete","catch","err","SearchLinks","filter","setFilter","filteredLinks","setFilteredLinks","links","setLinks","snapShot","docs","map","query","toLowerCase","matchedLinks","includes","filteredLink","Link_LinkItem","key","LinkList","cursor","setCursor","isNewPage","location","pathname","isTopPage","page","match","params","handleSnapshot","snapshot","lastLink","unsubscribe","hasCursor","Boolean","orderBy","limit","onSnapshot","startAfter","offset","axios","response","getLinks","pageIndex","LinkDetail","setLink","commentText","setCommentText","linkId","linkRef","cols","rows","prevComments","comment","text","updatedComments","prevState","Header","src","alt","logout","useAuth","authUser","setAuthUser","onAuthStateChanged","App","context","Provider","components_Header","react_router","exact","path","render","component","window","hostname","ReactDOM","components_App","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.5578d9ae.chunk.js","sourcesContent":["import React from \"react\";\n\nfunction useFormValidation(initialState, validate, authenticate) {\n  const [values, setValues] = React.useState(initialState);\n  const [errors, setErrors] = React.useState({});\n  const [isSubmitting, setSubmitting] = React.useState(false);\n\n  React.useEffect(() => {\n    if (isSubmitting) {\n      const noErrors = Object.keys(errors).length === 0;\n      if (noErrors) {\n        console.log(\"Authenticate user\");\n        authenticate();\n        setSubmitting(false);\n      } else {\n        setSubmitting(false);\n      }\n    }\n  }, [errors]);\n\n  function handleChange(event) {\n    event.persist();\n    setValues(prevValues => ({\n      ...prevValues,\n      [event.target.name]: event.target.value\n    }));\n  }\n\n  function handleBlur() {\n    const validationErrors = validate(values);\n    setErrors(validationErrors);\n  }\n  function handleSubmit(event) {\n    event.preventDefault();\n    const validationErrors = validate(values);\n    setErrors(validationErrors);\n    setSubmitting(true);\n    console.log({ values });\n  }\n  return {\n    handleChange,\n    handleSubmit,\n    handleBlur,\n    values,\n    errors,\n    isSubmitting\n  };\n}\n\nexport default useFormValidation;\n","export default function validateCreateLink(values) {\n  let errors = {};\n\n  // description errors\n  if (!values.description) {\n    errors.description = \"description reqd.\";\n  } else if (values.description.length < 6) {\n    errors.description = \"Description must be atleast 6 characters\";\n  }\n\n  // URL errors\n  if (!values.url) {\n    errors.url = \"URL reqd.\";\n  } else if (!/^(ftp|http|https):\\/\\/[^ \"]+$/.test(values.url)) {\n    errors.url = \"URL must be a valid one\";\n  }\n\n  return errors;\n}\n","var firebaseConfig = {\r\n  apiKey: \"AIzaSyBOigG5XyQbqyyfFaPnD9ECTVcqj6zDjKM\",\r\n  authDomain: \"hacker-news-hooks-e1f82.firebaseapp.com\",\r\n  databaseURL: \"https://hacker-news-hooks-e1f82.firebaseio.com\",\r\n  projectId: \"hacker-news-hooks-e1f82\",\r\n  storageBucket: \"hacker-news-hooks-e1f82.appspot.com\",\r\n  messagingSenderId: \"584557338177\",\r\n  appId: \"1:584557338177:web:be291cd0584068b5b5f0c0\",\r\n  measurementId: \"G-GEW45EB0HR\"\r\n};\r\n\r\nexport default firebaseConfig;\r\n","import app from \"firebase/app\";\r\nimport \"firebase/auth\";\r\nimport \"firebase/firestore\";\r\nimport firebaseConfig from \"./config\";\r\n\r\n// Initialize Firebase\r\n\r\nclass Firebase {\r\n  constructor() {\r\n    app.initializeApp(firebaseConfig);\r\n    this.auth = app.auth();\r\n    this.db = app.firestore();\r\n  }\r\n  async register(name, email, password) {\r\n    const newUser = await this.auth.createUserWithEmailAndPassword(\r\n      email,\r\n      password\r\n    );\r\n    return await newUser.user.updateProfile({\r\n      displayName: name\r\n    });\r\n  }\r\n\r\n  async login(email, password) {\r\n    return await this.auth.signInWithEmailAndPassword(email, password);\r\n  }\r\n  async logout() {\r\n    await this.auth.signOut();\r\n  }\r\n  async resetPassword(email) {\r\n    await this.auth.sendPasswordResetEmail(email);\r\n  }\r\n}\r\n\r\nconst firebase = new Firebase();\r\nexport default firebase;\r\n","import React from \"react\";\r\nconst FirebaseContext = React.createContext(null);\r\nexport default FirebaseContext;\r\n","import firebase from \"./firebase\";\r\nimport FirebaseContext from \"./context\";\r\nexport { FirebaseContext };\r\nexport default firebase;\r\n","import React from \"react\";\nimport useFormValidation from \"./../Auth/useFormValidation\";\nimport validateCreateLink from \"./../Auth/validateCreateLink\";\nimport { FirebaseContext } from \"../../firebase\";\n\nconst initialState = {\n  description: \"\",\n  url: \"\"\n};\nfunction CreateLink(props) {\n  const { firebase, user } = React.useContext(FirebaseContext);\n  const { handleSubmit, handleChange, values, errors } = useFormValidation(\n    initialState,\n    validateCreateLink,\n    handleCreateLink\n  );\n  function handleCreateLink() {\n    if (!user) {\n      props.history.push(\"/login\");\n    } else {\n      const { url, description } = values;\n      const newLink = {\n        url,\n        description,\n        postedBy: {\n          id: user.uid,\n          name: user.displayName\n        },\n        voteCount: 0,\n        votes: [],\n        comments: [],\n        created: Date.now()\n      };\n      firebase.db.collection(\"links\").add(newLink);\n      props.history.push(\"/\");\n    }\n  }\n  return (\n    <div>\n      <form onSubmit={handleSubmit} className=\"flex flex-column mt3\">\n        <input\n          onChange={handleChange}\n          name=\"description\"\n          placeholder=\"Description\"\n          type=\"text\"\n          value={values.description}\n          className={errors.description && \"error-input\"}\n        />\n        {errors.description && (\n          <p className=\"error-text\"> {errors.description}</p>\n        )}\n        <input\n          onChange={handleChange}\n          name=\"url\"\n          placeholder=\"URL\"\n          type=\"url\"\n          value={values.url}\n        />\n        {errors.url && <p className=\"error-text\"> {errors.url}</p>}\n        <button type=\"submit\" className=\"button\">\n          Submit\n        </button>\n      </form>\n    </div>\n  );\n}\n\nexport default CreateLink;\n","export default function validateLogin(values) {\n  let errors = {};\n\n  // email errors\n  if (!values.email) {\n    errors.email = \"Email reqd.\";\n  } else if (!/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}$/i.test(values.email)) {\n    errors.email = \"Invalid email\";\n  }\n\n  // password errors\n  if (!values.password) {\n    errors.password = \"Password reqd.\";\n  } else if (values.password.length < 6) {\n    errors.password = \"Password must be atleast 6 chars\";\n  }\n\n  return errors;\n}\n","import React, { useState } from \"react\";\nimport useFormValidation from \"./useFormValidation\";\nimport { Link } from \"react-router-dom\";\nimport validateLogin from \"./validateLogin\";\n\nimport firebase from \"./../../firebase\";\nconst INIT_STATE = {\n  name: \"\",\n  email: \"\",\n  password: \"\"\n};\nfunction Login(props) {\n  const {\n    handleChange,\n    handleSubmit,\n    handleBlur,\n    values,\n    errors,\n    isSubmitting\n  } = useFormValidation(INIT_STATE, validateLogin, authenticateUser);\n\n  const [login, setLogin] = useState(true);\n  const [fbError, setFbError] = useState(null);\n  async function authenticateUser() {\n    const { name, email, password } = values;\n    try {\n      login\n        ? await firebase.login(email, password)\n        : await firebase.register(name, email, password);\n      props.history.push(\"/\");\n    } catch (error) {\n      console.log(\"Auth error>>>\", error);\n      setFbError(error.message);\n    }\n  }\n\n  return (\n    <div>\n      <h2 className=\"mv3\"> {login ? \"Login\" : \"Create Account\"} </h2>\n      <form onSubmit={handleSubmit} className=\"flex flex-column\">\n        {!login && (\n          <input\n            name=\"name\"\n            type=\"text\"\n            onChange={handleChange}\n            placeholder=\"Your name\"\n            value={values.name}\n          />\n        )}\n        <input\n          name=\"email\"\n          onChange={handleChange}\n          onBlur={handleBlur}\n          type=\"email\"\n          className={errors.email && \"error-input\"}\n          placeholder=\"Your email\"\n          value={values.email}\n        />\n        {errors.email && <p className=\"error-text\"> {errors.email} </p>}\n        <input\n          name=\"password\"\n          onChange={handleChange}\n          onBlur={handleBlur}\n          type=\"password\"\n          className={errors.password && \"error-input\"}\n          placeholder=\"Your password\"\n          value={values.password}\n        />\n        {errors.password && <p className=\"error-text\"> {errors.password} </p>}\n        {fbError && <p className=\"error-text\"> {fbError} </p>}\n        <div className=\"flex mt3\">\n          <button\n            disabled={isSubmitting}\n            style={{ background: isSubmitting ? \"grey\" : \"orange\" }}\n            type=\"submit\"\n            className=\"button pointer mr2\"\n          >\n            Submit\n          </button>\n          <button\n            type=\"button\"\n            onClick={() => setLogin(prevLogin => !prevLogin)}\n            className=\"button pointer\"\n          >\n            {login ? \"Create an account\" : \"already have an account?\"}\n          </button>\n        </div>\n      </form>\n      <div className=\"forgot-password\">\n        <Link to=\"/forgot\"> Reset password? </Link>\n      </div>\n    </div>\n  );\n}\n\nexport default Login;\n","import React from \"react\";\nimport { FirebaseContext } from \"../../firebase\";\n\nfunction ForgotPassword() {\n  const { firebase } = React.useContext(FirebaseContext);\n  const [resetPasswordEmail, setResetPasswordEmail] = React.useState(\"\");\n  const [isPasswordReset, setIsPasswordReset] = React.useState(false);\n  const [passwordResetError, setPasswordResetError] = React.useState(null);\n  async function handleResetPassword() {\n    try {\n      await firebase.resetPassword(resetPasswordEmail);\n      setIsPasswordReset(true);\n      setPasswordResetError(null);\n    } catch (error) {\n      console.error(error);\n      setPasswordResetError(error.message);\n      setIsPasswordReset(false);\n    }\n  }\n  return (\n    <div>\n      <input\n        onChange={e => setResetPasswordEmail(e.target.value)}\n        className=\"input\"\n        placeholder=\"Provide your email\"\n        type=\"email\"\n      />\n      <div>\n        <button\n          onClick={() => handleResetPassword(resetPasswordEmail)}\n          className=\"button\"\n        >\n          Reset password\n        </button>\n      </div>\n      {isPasswordReset && <p> Password reset mail on your way! </p>}\n      {passwordResetError && (\n        <p className=\"error-text\"> {passwordResetError} </p>\n      )}\n    </div>\n  );\n}\n\nexport default ForgotPassword;\n","import React from \"react\";\nimport { Link, withRouter } from \"react-router-dom\";\nimport { getDomain } from \"../../utils\";\nimport distanceInWordsToNow from \"date-fns/distance_in_words_to_now\";\nimport { FirebaseContext } from \"../../firebase\";\nfunction LinkItem({ link, index, showCount, history }) {\n  const { firebase, user } = React.useContext(FirebaseContext);\n  function handleVote() {\n    if (!user) {\n      history.push(\"/login\");\n    } else {\n      const voteRef = firebase.db.collection(\"links\").doc(link.id);\n      voteRef.get().then(doc => {\n        if (doc.exists) {\n          const prevVotes = doc.data().votes;\n          const vote = {\n            votedBy: { id: user.uid, name: user.displayName }\n          };\n          const updatedVotes = [...prevVotes, vote];\n          const voteCount = updatedVotes.length;\n          voteRef.update({ votes: updatedVotes, voteCount });\n        }\n      });\n    }\n  }\n  function handleDeleteLink() {\n    const linkRef = firebase.db.collection(\"links\").doc(link.id);\n    linkRef\n      .delete()\n      .then(() => {\n        console.log(\"Document deleted successfully!\");\n      })\n      .catch(err => {\n        console.error(\"Deletion aborted\");\n      });\n  }\n  const postedByAuthUser = user && user.uid === link.postedBy.id;\n  return (\n    <div className=\"flex items-start mt2\">\n      <div className=\"flex items-center\">\n        {showCount && <span className=\"gray\"> {index}</span>}\n        <div onClick={handleVote} className=\"vote-button\">\n          ▲\n        </div>\n      </div>\n      <div className=\"ml1\">\n        <div>\n          <a className=\"black no-underline\" href={link.url}>\n            {link.description}\n          </a>\n          <span className=\"link\"> ({getDomain(link.url)})</span>\n        </div>\n        <div className=\"f6 lh-copy gray\">\n          {link.voteCount} votes by {link.postedBy.name}\n          {distanceInWordsToNow(link.created)}\n          {\" | \"}\n          <Link to={`/link/${link.id}`}>\n            {link.comments.length > 0\n              ? `${link.comments.length} comments`\n              : \"discuss\"}\n          </Link>\n          {postedByAuthUser && (\n            <>\n              {\" | \"}\n              <span onClick={handleDeleteLink} className=\"delete-button\">\n                {\" \"}\n                delete\n              </span>\n            </>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default withRouter(LinkItem);\n","export const LINKS_PER_PAGE = 5;\n\nexport function getDomain(url) {\n  return url.replace(/^https?:\\/\\//i, \"\");\n}\n\n/* EMAIL REGEX: !/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}$/i.test(values.email) */\n/* URL REGEX: !/^(ftp|http|https):\\/\\/[^ \"]+$/.test(values.url) */\n","import React from \"react\";\nimport { FirebaseContext } from \"../../firebase\";\nimport LinkItem from \"./LinkItem\";\n\nfunction SearchLinks() {\n  const [filter, setFilter] = React.useState(\"\");\n  const [filteredLinks, setFilteredLinks] = React.useState([]);\n  const { firebase, user } = React.useContext(FirebaseContext);\n  const [links, setLinks] = React.useState([]);\n  React.useEffect(() => {\n    getInitialLinks();\n  }, []);\n\n  function getInitialLinks() {\n    firebase.db\n      .collection(\"links\")\n      .get()\n      .then(snapShot => {\n        const links = snapShot.docs.map(doc => {\n          return {\n            id: doc.id,\n            ...doc.data()\n          };\n        });\n        setLinks(links);\n      });\n  }\n\n  function handleSearch(event) {\n    event.preventDefault();\n    const query = filter.toLowerCase();\n    const matchedLinks = links.filter(link => {\n      return (\n        link.description.toLowerCase().includes(query) ||\n        link.url.toLowerCase().includes(query) ||\n        link.postedBy.name.toLowerCase().includes(query)\n      );\n    });\n    setFilteredLinks(matchedLinks);\n  }\n  return (\n    <div>\n      <form onSubmit={handleSearch}>\n        <div>\n          Search <input onChange={e => setFilter(e.target.value)} />\n          <button> OK </button>\n        </div>\n      </form>\n      {filteredLinks.map((filteredLink, index) => (\n        <LinkItem\n          key={filteredLink.id}\n          showCount={false}\n          link={filteredLink}\n          index={index}\n        />\n      ))}\n    </div>\n  );\n}\n\nexport default SearchLinks;\n","import React from \"react\";\nimport { FirebaseContext } from \"../../firebase\";\nimport LinkItem from \"./LinkItem\";\nimport axios from \"axios\";\nfunction LinkList(props) {\n  const { firebase } = React.useContext(FirebaseContext);\n  const [links, setLinks] = React.useState([]);\n  const [cursor, setCursor] = React.useState(null);\n  const isNewPage = props.location.pathname.includes(\"new\");\n  const isTopPage = props.location.pathname.includes(\"top\");\n  const page = +props.match.params.page;\n  React.useEffect(() => {\n    const unsubscribe = getLinks();\n    return () => unsubscribe();\n  }, [isTopPage, page]);\n\n  function getLinks() {\n    const hasCursor = Boolean(cursor);\n    if (isTopPage) {\n      return firebase.db\n        .collection(\"links\")\n        .orderBy(\"voteCount\", \"desc\")\n        .limit(2)\n        .onSnapshot(handleSnapshot);\n    } else if (page === 1) {\n      // onSnapshot sets up continuous listening\n      return firebase.db\n        .collection(\"links\")\n        .orderBy(\"created\", \"desc\")\n        .limit(2)\n        .onSnapshot(handleSnapshot);\n    } else if (hasCursor) {\n      return firebase.db\n        .collection(\"links\")\n        .orderBy(\"created\", \"desc\")\n        .limit(2)\n        .startAfter(cursor.created)\n        .onSnapshot(handleSnapshot);\n    } else {\n      const offset = page * 2 - 2;\n      axios\n        .get(\n          `https://us-central1-hacker-news-hooks-e1f82.cloudfunctions.net/linksPagination?offset=${offset}`\n        )\n        .then(response => {\n          const links = response.data;\n          const lastLink = links[links.length - 1];\n          setLinks(links);\n          setCursor(lastLink);\n        });\n      return () => {};\n    }\n  }\n\n  function handleSnapshot(snapshot) {\n    const links = snapshot.docs.map(doc => {\n      return {\n        id: doc.id,\n        ...doc.data()\n      };\n    });\n    const lastLink = links[links.length - 1];\n    setLinks(links);\n    setCursor(lastLink);\n  }\n\n  function visitPrevPage() {\n    if (page > 1) {\n      props.history.push(`/new/${page - 1}`);\n    }\n  }\n\n  function visitNextPage() {\n    if (page <= links.length / 2) {\n      props.history.push(`/new/${page + 1}`);\n    }\n  }\n  const pageIndex = page ? (page - 1) * 2 + 1 : 0;\n  return (\n    <div>\n      {links.map((link, index) => (\n        <LinkItem\n          key={link.id}\n          showCount={true}\n          link={link}\n          index={index + pageIndex}\n        />\n      ))}\n      {isNewPage && (\n        <div className=\"pagination\">\n          <div onClick={visitPrevPage} className=\"pointer mr2\">\n            Previous\n          </div>\n          <div onClick={visitNextPage} className=\"pointer\">\n            Next\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default LinkList;\n","import React from \"react\";\nimport { FirebaseContext } from \"../../firebase\";\nimport LinkItem from \"./LinkItem\";\nimport distanceInWordsToNow from \"date-fns/distance_in_words_to_now\";\n\nfunction LinkDetail(props) {\n  const { firebase, user } = React.useContext(FirebaseContext);\n  const [link, setLink] = React.useState(null);\n  const [commentText, setCommentText] = React.useState(\"\");\n  const linkId = props.match.params.linkId;\n  const linkRef = firebase.db.collection(\"links\").doc(linkId);\n  React.useEffect(() => {\n    getLink();\n  }, []);\n\n  function getLink() {\n    linkRef.get().then(doc => {\n      setLink({ ...doc.data(), id: doc.id });\n    });\n  }\n\n  function handleAddComment() {\n    if (!user) {\n      props.history.push(\"/login\");\n    } else {\n      linkRef.get().then(doc => {\n        if (doc.exists) {\n          const prevComments = doc.data().comments;\n          const comment = {\n            postedBy: { id: user.uid, name: user.displayName },\n            created: Date.now(),\n            text: commentText\n          };\n          const updatedComments = [...prevComments, comment];\n          linkRef.update({ comments: updatedComments });\n          setLink(prevState => ({\n            ...prevState,\n            comments: updatedComments\n          }));\n          setCommentText(\"\");\n        }\n      });\n    }\n  }\n  return !link ? (\n    <div> Loading..</div>\n  ) : (\n    <div>\n      <LinkItem showCount={false} link={link} />\n      <textarea\n        onChange={e => setCommentText(e.target.value)}\n        value={commentText}\n        cols=\"60\"\n        rows=\"6\"\n      ></textarea>\n      <div>\n        <button onClick={handleAddComment} className=\"button\">\n          Add comment\n        </button>\n      </div>\n      {link.comments.map((comment, index) => (\n        <div key={index}>\n          <p className=\"comment-author\">\n            {comment.postedBy.name} | {distanceInWordsToNow(comment.created)}\n          </p>\n          <p> {comment.text} </p>\n        </div>\n      ))}\n    </div>\n  );\n}\n\nexport default LinkDetail;\n","import React from \"react\";\nimport { withRouter, NavLink } from \"react-router-dom\";\nimport { FirebaseContext } from \"../firebase\";\nfunction Header() {\n  const { user, firebase } = React.useContext(FirebaseContext);\n  return (\n    <div className=\"header\">\n      <div className=\"flex\">\n        <img className=\"logo\" src=\"/logo.png\" alt=\"Hooks news logo\" />\n        <NavLink to=\"/\" className=\"header-title\">\n          Hooks News\n        </NavLink>\n        <NavLink to=\"/\" className=\"header-link\">\n          new\n        </NavLink>\n        <div className=\"divider\">| </div>\n        <NavLink to=\"/top\" className=\"header-link\">\n          top\n        </NavLink>\n        <div className=\"divider\">| </div>\n        <NavLink to=\"/search\" className=\"header-link\">\n          search\n        </NavLink>\n        {user && (\n          <>\n            <div className=\"divider\">| </div>\n            <NavLink to=\"/create\" className=\"header-link\">\n              submit\n            </NavLink>\n          </>\n        )}\n      </div>\n      <div className=\"flex\">\n        {user ? (\n          <>\n            <div className=\"header-name\"> {user.displayName} </div>\n            <div className=\"divider\">|</div>\n            <div onClick={() => firebase.logout()} className=\"header-button\">\n              logout\n            </div>\n          </>\n        ) : (\n          <NavLink to=\"/login\" className=\"header-link\">\n            login\n          </NavLink>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default Header;\n","import React from \"react\";\nimport firebase from \"./../../firebase\";\n\nfunction useAuth() {\n  const [authUser, setAuthUser] = React.useState(null);\n  React.useEffect(() => {\n    const unsubscribe = firebase.auth.onAuthStateChanged(user => {\n      if (user) {\n        setAuthUser(user);\n      } else {\n        setAuthUser(null);\n      }\n    });\n    return () => unsubscribe();\n  }, []);\n  return authUser;\n}\n\nexport default useAuth;\n","import React from \"react\";\nimport { BrowserRouter, Switch, Route, Redirect } from \"react-router-dom\";\nimport CreateLink from \"./Link/CreateLink\";\nimport Login from \"./Auth/Login\";\nimport ForgotPassword from \"./Auth/ForgotPassword\";\nimport SearchLinks from \"./Link/SearchLinks\";\nimport LinkList from \"./Link/LinkList\";\nimport LinkDetail from \"./Link/LinkDetail\";\nimport Header from \"./Header\";\nimport useAuth from \"./Auth/useAuth\";\nimport firebase, { FirebaseContext } from \"../firebase\";\n\nfunction App() {\n  const user = useAuth();\n  return (\n    <BrowserRouter>\n      <FirebaseContext.Provider value={{ user, firebase }}>\n        <div className=\"app-container\">\n          <Header />\n          <div className=\"route-container\">\n            <Switch>\n              <Route exact path=\"/\" render={() => <Redirect to=\"/new/1\" />} />\n              <Route path=\"/create\" component={CreateLink} />\n              <Route path=\"/login\" component={Login} />\n              <Route path=\"/forgot\" component={ForgotPassword} />\n              <Route path=\"/search\" component={SearchLinks} />\n              <Route path=\"/top\" component={LinkList} />\n              <Route path=\"/new/:page\" component={LinkList} />\n              <Route path=\"/link/:linkId\" component={LinkDetail} />\n            </Switch>\n          </div>\n        </div>\n      </FirebaseContext.Provider>\n    </BrowserRouter>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./styles/index.css\";\nimport App from \"./components/App\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}